name: Main Workflow

on:
  push:
    branches:
      - 'main'


jobs:
  validate-structure:
    name: "Validate repository structure"
    concurrency: validate
    uses: ./.github/workflows/validate-structure.yml

  validate-zone:
    name: "Validate zone syntax"
    concurrency: validate
    runs-on: ubuntu-latest
    steps:
    - name: Print Hello World
      run: echo "Hello world."

  update-serial:
    name: "Update serial number"
    needs:
    - validate-structure
    - validate-zone
    runs-on: ubuntu-latest
    steps:
    - name: Print Hello World
      run: echo "Hello world."

  build-image:
    name: "Build Docker image"
    needs:
    - update-serial
    runs-on: ubuntu-latest
    steps:
    - name: Print Hello World
      run: echo "Hello world."
